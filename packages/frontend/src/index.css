@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Spacing scale */
    --space-base: 1rem;

    /* Border radius */
    --radius-soft: 0.75rem;
    --radius-gentle: 1rem;
    --radius-extra: 1.5rem;

    /* Transition timing */
    --transition-gentle: cubic-bezier(0.4, 0, 0.2, 1);
    --transition-smooth: cubic-bezier(0.25, 0.1, 0.25, 1);

    /* Z-index scale */
    --z-base: 1;
    --z-dropdown: 100;
    --z-sticky: 200;
    --z-fixed: 300;
    --z-modal-backdrop: 400;
    --z-modal: 500;
    --z-toast: 600;
    --z-tooltip: 700;
  }

  body {
    background-color: #fdfcfa; /* cream-50 */
    color: #52443c; /* earth-900 */
    font-feature-settings: "rlig" 1, "calt" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  * {
    border-color: #d1e1d1; /* sage-200 */
  }

  /* Smooth scroll behavior */
  html {
    scroll-behavior: smooth;
  }

  @media (prefers-reduced-motion: prefer-reduced-motion) {
    html {
      scroll-behavior: auto;
    }

    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Focus styles */
  :focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px #fdfcfa, 0 0 0 4px #5a925a;
  }

  /* Selection */
  ::selection {
    background-color: #d1e1d1; /* sage-200 */
    color: #264026; /* sage-900 */
  }
}

@layer components {
  /* Custom scrollbar - Peaceful Garden style */
  .scrollbar-thin::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    @apply bg-sage-100 rounded-full;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    @apply bg-sage-300 rounded-full hover:bg-sage-400;
    transition: background-color 0.2s ease;
  }

  /* Gradient text */
  .gradient-text-sage {
    @apply bg-gradient-to-r from-sage-600 to-sage-400 bg-clip-text text-transparent;
  }

  .gradient-text-earth {
    @apply bg-gradient-to-r from-earth-600 to-earth-400 bg-clip-text text-transparent;
  }

  /* Backdrop blur utility */
  .backdrop-gentle {
    backdrop-filter: blur(8px) saturate(180%);
    -webkit-backdrop-filter: blur(8px) saturate(180%);
  }

  /* Loading skeleton */
  .skeleton {
    @apply bg-gradient-to-r from-sage-100 via-sage-200 to-sage-100 bg-[length:200%_100%];
    animation: shimmer 2s linear infinite;
  }

  /* Card styles */
  .card-peaceful {
    @apply bg-white rounded-gentle shadow-soft border border-sage-100;
    transition: all 0.3s var(--transition-gentle);
  }

  .card-peaceful:hover {
    @apply shadow-gentle border-sage-200;
  }

  /* Button base styles */
  .btn-base {
    @apply px-4 py-2 rounded-soft font-medium transition-all duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply btn-base bg-sage-600 text-white hover:bg-sage-700;
    @apply focus:ring-sage-500;
  }

  .btn-secondary {
    @apply btn-base bg-earth-100 text-earth-700 hover:bg-earth-200;
    @apply focus:ring-earth-500;
  }

  .btn-ghost {
    @apply btn-base bg-transparent text-sage-700 hover:bg-sage-50;
    @apply focus:ring-sage-500;
  }

  /* Input styles */
  .input-peaceful {
    @apply w-full px-4 py-2.5 bg-white border border-sage-200 rounded-soft;
    @apply text-earth-900 placeholder-earth-400;
    @apply focus:border-sage-400 focus:ring-2 focus:ring-sage-200 focus:outline-none;
    @apply transition-all duration-200;
  }

  .input-peaceful:hover:not(:focus) {
    @apply border-sage-300;
  }

  /* Badge styles */
  .badge-peaceful {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
    @apply bg-sage-100 text-sage-700;
  }

  .badge-calm {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
    @apply bg-sky-100 text-sky-700;
  }

  .badge-warm {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
    @apply bg-earth-100 text-earth-700;
  }

  /* Floating action button */
  .fab {
    @apply fixed bottom-6 right-6 w-14 h-14 rounded-full shadow-floating;
    @apply bg-sage-600 text-white hover:bg-sage-700;
    @apply flex items-center justify-center;
    @apply transition-all duration-300;
    @apply focus:outline-none focus:ring-4 focus:ring-sage-200;
    z-index: var(--z-fixed);
  }

  .fab:hover {
    @apply scale-110;
  }

  /* Divider with text */
  .divider {
    @apply relative flex items-center;
  }

  .divider::before,
  .divider::after {
    content: '';
    @apply flex-1 border-t border-sage-200;
  }

  .divider::before {
    @apply mr-4;
  }

  .divider::after {
    @apply ml-4;
  }

  /* Toast notification base */
  .toast {
    @apply fixed bottom-6 right-6 max-w-sm;
    @apply bg-white rounded-gentle shadow-floating border border-sage-100;
    @apply p-4 animate-slide-up;
    z-index: var(--z-toast);
  }

  /* Mood indicator */
  .mood-indicator {
    @apply w-3 h-3 rounded-full inline-block mr-2;
  }

  .mood-peaceful {
    @apply bg-peaceful;
  }

  .mood-calm {
    @apply bg-calm;
  }

  .mood-neutral {
    @apply bg-neutral;
  }

  .mood-anxious {
    @apply bg-anxious;
  }

  .mood-stressed {
    @apply bg-stressed;
  }

  /* Progress bar */
  .progress-bar {
    @apply w-full h-2 bg-sage-100 rounded-full overflow-hidden;
  }

  .progress-fill {
    @apply h-full bg-gradient-to-r from-sage-500 to-sage-400 rounded-full;
    @apply transition-all duration-500 ease-out;
  }

  /* Breathing circle animation */
  .breathing-circle {
    @apply w-32 h-32 rounded-full bg-gradient-to-br from-sage-400 to-sage-600;
    @apply animate-breathe shadow-gentle;
  }
}

@layer utilities {
  /* Text balance for better readability */
  .text-balance {
    text-wrap: balance;
  }

  /* Truncate with custom lines */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Visually hidden but accessible */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Glass morphism effect */
  .glass {
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(10px) saturate(180%);
    -webkit-backdrop-filter: blur(10px) saturate(180%);
  }

  /* Soft elevation levels */
  .elevation-1 {
    @apply shadow-soft;
  }

  .elevation-2 {
    @apply shadow-gentle;
  }

  .elevation-3 {
    @apply shadow-floating;
  }
}
